/******/ (function() { // webpackBootstrap
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var canvas = document.getElementById("canvas");
var ctx = canvas.getContext('2d');
canvas.width = 800;
canvas.height = 500;
var score = 0;
var gameFrame = 0;
ctx.font = "30px Bungee Shade";
var canvasPos = canvas.getBoundingClientRect();
console.log(canvasPos);
var keys = {
  leftPressed: false,
  rightPressed: false
};
document.addEventListener('keydown', function (e) {
  switch (e.keyCode) {
    case 37:
      keys.leftPressed = true;
      break;

    case 39:
      keys.rightPressed = true;
      break;
  }
});
document.addEventListener('keyup', function (e) {
  switch (e.keyCode) {
    case 37:
      keys.leftPressed = false;
      break;

    case 39:
      keys.rightPressed = false;
      break;
  }
});
canvas.addEventListener('mouseup', function (event) {
  console.log(event.x - canvasPos.left, event.y - canvasPos.top);
}); //food

var tomato = new Image();
tomato.src = './dist/images/tomato.png';
var lettuce = new Image();
lettuce.src = './dist/images/lettuce.png';
var bread = new Image();
bread.src = './dist/images/bread.png';
var bacon = new Image();
bacon.src = './dist/images/bacon.png';
var mayo = new Image();
mayo.src = './dist/images/mayo.png';
var mayoflat = new Image();
mayoflat.src = './dist/images/mayoflat.png';
var ingredients = [tomato, mayo, lettuce, bacon, tomato, mayo, lettuce, bacon, bread];
var foodArr = [];

var Food = /*#__PURE__*/function () {
  function Food() {
    _classCallCheck(this, Food);

    this.x = Math.random() * canvas.width;
    this.y = -100;
    this.radius = 50;
    this.counted = false;
    this.ingredient = ingredients[Math.floor(Math.random() * ingredients.length)]; // this.stackx = this.x;
    // this.stacky = canvas.height - 100;

    if (this.x > 700) this.x -= 100; // if (this.x < 100) this.x += 100;
  }

  _createClass(Food, [{
    key: "update",
    value: function update() {
      var dy = canvas.height + 100;
      if (dy != this.y) this.y += 5;
    }
  }, {
    key: "draw",
    value: function draw() {
      if (this.ingredient.currentSrc.includes("bread")) {
        ctx.drawImage(this.ingredient, 0, 0, 1000, 1000, this.x, this.y, 300, 300);
      } else {
        ctx.drawImage(this.ingredient, 0, 0, 1000, 1000, this.x, this.y, 250, 250);
      }
    }
  }]);

  return Food;
}();

var Bread = /*#__PURE__*/function () {
  function Bread() {
    _classCallCheck(this, Bread);

    this.y = canvas.height - 100;
    this.x = canvas.width / 2;
  }

  _createClass(Bread, [{
    key: "update",
    value: function update() {
      if (keys.leftPressed && this.x !== 0) this.x -= 5;
      if (keys.rightPressed && this.x !== canvas.width - 130) this.x += 5;
    }
  }, {
    key: "draw",
    value: function draw(contacted) {
      var stackx = this.x;
      var stacky = canvas.height - 100;
      ctx.drawImage(bread, 0, 0, 1000, 1000, this.x, canvas.height - 100, 300, 300);

      if (contacted) {
        for (var i = 0; i < contacted.length; i++) {
          if (contacted[i].ingredient) {
            if (contacted[i].ingredient.currentSrc.includes("bread")) {
              ctx.drawImage(contacted[i].ingredient, 0, 0, 1000, 1000, stackx, stacky, 300, 300);
            } else {
              ctx.drawImage(contacted[i].ingredient, 0, 0, 1000, 1000, stackx, stacky, 250, 250);
            }
          } else {
            ctx.drawImage(contacted[i], 0, 0, 1000, 1000, stackx, stacky, 250, 250);
          }

          stacky = stacky - 20;
          if (stacky < 40) yeet();
        }
      }
    }
  }]);

  return Bread;
}();

function gameOver() {}

var thisbread = new Bread();
var contacted = [];

function handleFood() {
  if (gameFrame % 200 == 0) {
    var newFood = new Food();
    foodArr.push(newFood);
  }

  for (var i = 0; i < foodArr.length; i++) {
    if (foodArr[i].y === thisbread.y && foodArr[i].x > thisbread.x - 50 && foodArr[i].x < thisbread.x + 50) {
      if (!foodArr[i].counted) score += 1;

      if (contacted.indexOf(foodArr[i]) === -1) {
        if (foodArr[i].ingredient.currentSrc.includes("mayo")) {
          contacted.push(mayoflat);
          foodArr[i].counted = true;
          foodArr.shift(foodArr[i]);
        } else {
          foodArr[i].counted = true;
          contacted.push(foodArr[i]);
        }

        thisbread.y -= 20;
      }

      break;
    }

    thisbread.draw(contacted);
    foodArr[i].update();
    if (contacted.indexOf(foodArr[i]) === -1 && foodArr[i].y < canvas.height) foodArr[i].draw();
    if (foodArr[i].y > canvas.height) foodArr.shift(foodArr[i]);
  }
} //animation 


function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  thisbread.draw(contacted);
  thisbread.update();
  handleFood();
  gameFrame++;
  ctx.fillStyle = "white";
  ctx.fillText("score: " + score, 10, 30);
  requestAnimationFrame(animate);
}

animate();
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qc19wcm9qZWN0X3NrZWxldG9uLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjdHgiLCJnZXRDb250ZXh0Iiwid2lkdGgiLCJoZWlnaHQiLCJzY29yZSIsImdhbWVGcmFtZSIsImZvbnQiLCJjYW52YXNQb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjb25zb2xlIiwibG9nIiwia2V5cyIsImxlZnRQcmVzc2VkIiwicmlnaHRQcmVzc2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJrZXlDb2RlIiwiZXZlbnQiLCJ4IiwibGVmdCIsInkiLCJ0b3AiLCJ0b21hdG8iLCJJbWFnZSIsInNyYyIsImxldHR1Y2UiLCJicmVhZCIsImJhY29uIiwibWF5byIsIm1heW9mbGF0IiwiaW5ncmVkaWVudHMiLCJmb29kQXJyIiwiRm9vZCIsIk1hdGgiLCJyYW5kb20iLCJyYWRpdXMiLCJjb3VudGVkIiwiaW5ncmVkaWVudCIsImZsb29yIiwibGVuZ3RoIiwiZHkiLCJjdXJyZW50U3JjIiwiaW5jbHVkZXMiLCJkcmF3SW1hZ2UiLCJCcmVhZCIsImNvbnRhY3RlZCIsInN0YWNreCIsInN0YWNreSIsImkiLCJ5ZWV0IiwiZ2FtZU92ZXIiLCJ0aGlzYnJlYWQiLCJoYW5kbGVGb29kIiwibmV3Rm9vZCIsInB1c2giLCJpbmRleE9mIiwic2hpZnQiLCJkcmF3IiwidXBkYXRlIiwiYW5pbWF0ZSIsImNsZWFyUmVjdCIsImZpbGxTdHlsZSIsImZpbGxUZXh0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLElBQU1BLE1BQU0sR0FBR0MsUUFBUSxDQUFDQyxjQUFULENBQXdCLFFBQXhCLENBQWY7QUFDQSxJQUFNQyxHQUFHLEdBQUdILE1BQU0sQ0FBQ0ksVUFBUCxDQUFrQixJQUFsQixDQUFaO0FBQ0FKLE1BQU0sQ0FBQ0ssS0FBUCxHQUFl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QUNEOzs7QUFDQSxTQUFTVyxPQUFULEdBQW1CO0FBQ2pCM0QsS0FBRyxDQUFDNEQsU0FBSixDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0IvRCxNQUFNLENBQUNLLEtBQTNCLEVBQWtDTCxNQUFNLENBQUNNLE1BQXpDO0FBQ0FnRCxXQUFTLENBQUNNLElBQVYsQ0FBZVosU0FBZjtBQUNBTSxXQUFTLENBQUNPLE1BQVY7QUFDQU4sWUFBVTtBQUNWL0MsV0FBUztBQUNUTCxLQUFHLENBQUM2RCxTQUFKLEdBQWdCLE9BQWhCO0FBQ0E3RCxLQUFHLENBQUM4RCxRQUFKLENBQWEsWUFBWTFELEtBQXpCLEVBQWdDLEVBQWhDLEVBQW9DLEVBQXBDO0FBQ0EyRCx1QkFBcUIsQ0FBQ0osT0FBRCxDQUFyQjtBQUNEOztBQUNEQSxPQUFPLEciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5jYW52YXMud2lkdGggPSA4MDA7XG5jYW52YXMuaGVpZ2h0ID0gNTAwO1xuXG5sZXQgc2NvcmUgPSAwO1xubGV0IGdhbWVGcmFtZSA9IDA7XG5jdHguZm9udCA9IFwiMzBweCBCdW5nZWUgU2hhZGVcIjtcblxubGV0IGNhbnZhc1BvcyA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbmNvbnNvbGUubG9nKGNhbnZhc1Bvcyk7XG5cbmNvbnN0IGtleXMgPSB7XG4gIGxlZnRQcmVzc2VkOiBmYWxzZSxcbiAgcmlnaHRQcmVzc2VkOiBmYWxzZVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICBjYXNlIDM3OlxuICAgICAga2V5cy5sZWZ0UHJlc3NlZCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM5OlxuICAgICAga2V5cy5yaWdodFByZXNzZWQgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgY2FzZSAzNzpcbiAgICAgIGtleXMubGVmdFByZXNzZWQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzk6XG4gICAgICBrZXlzLnJpZ2h0UHJlc3NlZCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG5cblxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgIGNvbnNvbGUubG9nKGV2ZW50LngtY2FudmFzUG9zLmxlZnQsIGV2ZW50LnktY2FudmFzUG9zLnRvcClcbn0pO1xuXG5cbi8vZm9vZFxuY29uc3QgdG9tYXRvID0gbmV3IEltYWdlKCk7XG50b21hdG8uc3JjID0gJy4vZGlzdC9pbWFnZXMvdG9tYXRvLnBuZydcbmNvbnN0IGxldHR1Y2UgPSBuZXcgSW1hZ2UoKTsgXG5sZXR0dWNlLnNyYyA9ICcuL2Rpc3QvaW1hZ2VzL2xldHR1Y2UucG5nJ1xuY29uc3QgYnJlYWQgPSBuZXcgSW1hZ2UoKTtcbmJyZWFkLnNyYyA9ICcuL2Rpc3QvaW1hZ2VzL2JyZWFkLnBuZydcbmNvbnN0IGJhY29uID0gbmV3IEltYWdlKCk7XG5iYWNvbi5zcmMgPSAnLi9kaXN0L2ltYWdlcy9iYWNvbi5wbmcnXG5jb25zdCBtYXlvID0gbmV3IEltYWdlKCk7XG5tYXlvLnNyYyA9ICcuL2Rpc3QvaW1hZ2VzL21heW8ucG5nJ1xuY29uc3QgbWF5b2ZsYXQgPSBuZXcgSW1hZ2UoKTtcbm1heW9mbGF0LnNyYyA9ICcuL2Rpc3QvaW1hZ2VzL21heW9mbGF0LnBuZydcbmNvbnN0IGluZ3JlZGllbnRzID0gW3RvbWF0bywgbWF5bywgbGV0dHVjZSwgYmFjb24sIHRvbWF0bywgbWF5bywgbGV0dHVjZSwgYmFjb24sIGJyZWFkXVxuXG5cbmNvbnN0IGZvb2RBcnIgPSBbXTtcbmNsYXNzIEZvb2Qge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnggPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLndpZHRoO1xuICAgIHRoaXMueSA9IC0xMDA7XG4gICAgdGhpcy5yYWRpdXMgPSA1MDtcbiAgICB0aGlzLmNvdW50ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmluZ3JlZGllbnQgPSBpbmdyZWRpZW50c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpbmdyZWRpZW50cy5sZW5ndGgpXVxuICAgIC8vIHRoaXMuc3RhY2t4ID0gdGhpcy54O1xuICAgIC8vIHRoaXMuc3RhY2t5ID0gY2FudmFzLmhlaWdodCAtIDEwMDtcblxuICAgIGlmICh0aGlzLnggPiA3MDApIHRoaXMueCAtPSAxMDA7XG4gICAgLy8gaWYgKHRoaXMueCA8IDEwMCkgdGhpcy54ICs9IDEwMDtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBkeSA9IGNhbnZhcy5oZWlnaHQrMTAwO1xuICAgIGlmIChkeSAhPSB0aGlzLnkpIHRoaXMueSArPSA1O1xuICB9XG4gIFxuICBkcmF3KCkge1xuICAgIGlmICh0aGlzLmluZ3JlZGllbnQuY3VycmVudFNyYy5pbmNsdWRlcyhcImJyZWFkXCIpKSB7XG4gICAgICBjdHguZHJhd0ltYWdlKHRoaXMuaW5ncmVkaWVudCwgMCwgMCwgMTAwMCwgMTAwMCwgdGhpcy54LCB0aGlzLnksIDMwMCwgMzAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmluZ3JlZGllbnQsIDAsIDAsIDEwMDAsIDEwMDAsIHRoaXMueCwgdGhpcy55LCAyNTAsIDI1MCk7XG4gICAgfVxuICB9XG5cbn1cblxuXG5cbmNsYXNzIEJyZWFke1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnkgPSBjYW52YXMuaGVpZ2h0LTEwMDtcbiAgICB0aGlzLnggPSBjYW52YXMud2lkdGgvMjtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBpZiAoa2V5cy5sZWZ0UHJlc3NlZCAmJiAodGhpcy54ICE9PSAwKSkgdGhpcy54IC09IDU7XG4gICAgaWYgKGtleXMucmlnaHRQcmVzc2VkICYmICh0aGlzLnggIT09IGNhbnZhcy53aWR0aC0xMzApKSB0aGlzLnggKz0gNTtcbiAgfVxuXG4gIGRyYXcoY29udGFjdGVkKSB7XG4gICAgbGV0IHN0YWNreCA9IHRoaXMueDtcbiAgICBsZXQgc3RhY2t5ID0gY2FudmFzLmhlaWdodCAtIDEwMDtcbiAgICBjdHguZHJhd0ltYWdlKGJyZWFkLCAwLCAwLCAxMDAwLCAxMDAwLCB0aGlzLngsIGNhbnZhcy5oZWlnaHQtMTAwLCAzMDAsIDMwMCk7XG5cbiAgICBpZiAoY29udGFjdGVkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhY3RlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY29udGFjdGVkW2ldLmluZ3JlZGllbnQpIHtcbiAgICAgICAgICBpZihjb250YWN0ZWRbaV0uaW5ncmVkaWVudC5jdXJyZW50U3JjLmluY2x1ZGVzKFwiYnJlYWRcIikpIHtcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY29udGFjdGVkW2ldLmluZ3JlZGllbnQsIDAsIDAsIDEwMDAsIDEwMDAsIHN0YWNreCwgc3RhY2t5LCAzMDAsIDMwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY29udGFjdGVkW2ldLmluZ3JlZGllbnQsIDAsIDAsIDEwMDAsIDEwMDAsIHN0YWNreCwgc3RhY2t5LCAyNTAsIDI1MCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY29udGFjdGVkW2ldLCAwLCAwLCAxMDAwLCAxMDAwLCBzdGFja3gsIHN0YWNreSwgMjUwLCAyNTApO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNreSA9IHN0YWNreSAtIDIwO1xuICAgICAgICBpZiAoc3RhY2t5IDwgNDApIHllZXQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2FtZU92ZXIgKCkge1xuICBcbn1cblxuY29uc3QgdGhpc2JyZWFkID0gbmV3IEJyZWFkKCk7XG5jb25zdCBjb250YWN0ZWQgPSBbXTtcblxuZnVuY3Rpb24gaGFuZGxlRm9vZCgpIHtcbiAgaWYgKGdhbWVGcmFtZSAlIDIwMCA9PSAwKSB7XG4gICAgbGV0IG5ld0Zvb2QgPSBuZXcgRm9vZCgpO1xuICAgIGZvb2RBcnIucHVzaChuZXdGb29kKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm9vZEFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmICgoZm9vZEFycltpXS55ID09PSB0aGlzYnJlYWQueSkgJiYgKGZvb2RBcnJbaV0ueCA+IHRoaXNicmVhZC54IC0gNTAgJiYgZm9vZEFycltpXS54IDwgdGhpc2JyZWFkLnggKyA1MCkpIHsgXG4gICAgICBpZiAoIWZvb2RBcnJbaV0uY291bnRlZCkgc2NvcmUgKz0gMTtcbiAgICAgIFxuICAgICAgaWYgKGNvbnRhY3RlZC5pbmRleE9mKGZvb2RBcnJbaV0pID09PSAtMSApIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChmb29kQXJyW2ldLmluZ3JlZGllbnQuY3VycmVudFNyYy5pbmNsdWRlcyhcIm1heW9cIikpIHtcbiAgICAgICAgICBjb250YWN0ZWQucHVzaChtYXlvZmxhdClcbiAgICAgICAgICBmb29kQXJyW2ldLmNvdW50ZWQgPSB0cnVlO1xuICAgICAgICAgIGZvb2RBcnIuc2hpZnQoZm9vZEFycltpXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb29kQXJyW2ldLmNvdW50ZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbnRhY3RlZC5wdXNoKGZvb2RBcnJbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc2JyZWFkLnkgLT0gMjA7XG5cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXNicmVhZC5kcmF3KGNvbnRhY3RlZCk7XG4gICAgZm9vZEFycltpXS51cGRhdGUoKTtcblxuICAgIGlmIChjb250YWN0ZWQuaW5kZXhPZihmb29kQXJyW2ldKSA9PT0gLTEgJiYgZm9vZEFycltpXS55IDwgY2FudmFzLmhlaWdodCkgZm9vZEFycltpXS5kcmF3KCk7XG4gICAgaWYgKGZvb2RBcnJbaV0ueSA+IGNhbnZhcy5oZWlnaHQpIGZvb2RBcnIuc2hpZnQoZm9vZEFycltpXSlcbiAgfVxuXG4gIFxufVxuLy9hbmltYXRpb24gXG5mdW5jdGlvbiBhbmltYXRlKCkge1xuICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gIHRoaXNicmVhZC5kcmF3KGNvbnRhY3RlZCk7XG4gIHRoaXNicmVhZC51cGRhdGUoKTtcbiAgaGFuZGxlRm9vZCgpO1xuICBnYW1lRnJhbWUrKztcbiAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgY3R4LmZpbGxUZXh0KFwic2NvcmU6IFwiICsgc2NvcmUsIDEwLCAzMClcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xufVxuYW5pbWF0ZSgpO1xuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=